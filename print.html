<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Dogebox</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="Dogebox is a Linux server distribution and custom server software built specifically to meet the needs of the Dogecoin community.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Dogebox</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/dogeorg/dogebox/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><img src="getting_started/../images/dogebox-logo.png" alt="Dogebox" width="90%" style="margin-left: 5%;"/></p>
<h2 id="what-is-the-dogebox-project"><a class="header" href="#what-is-the-dogebox-project">What is the Dogebox project?</a></h2>
<p>Dogebox is a Linux server distribution and custom server software built
specifically to meet the needs of the Dogecoin community.</p>
<p>The objective: to provide a decentralised platform for the development,
distribution and self-hosting of software (we call them PUPs) that will
bring real utility to the Dogecoin ecosystem and drive adoption.</p>
<h2 id="join-the-dogebox-developer-discord-for-help"><a class="header" href="#join-the-dogebox-developer-discord-for-help"><a href="https://discord.gg/VEUMWpThg9">&gt;&gt;&gt; Join the Dogebox Developer Discord for Help &lt;&lt;&lt;</a></a></h2>
<h2 id="whats-in-the-box"><a class="header" href="#whats-in-the-box">What's in the box?</a></h2>
<p>Dogebox is a locked down custom configuration of NixOS Linux which includes
a number of Dogecoin specific services that combined deliver the Dogebox
UI, the DRE (Doge Runtime Environment), Pup management and secure interaction
between Pups.</p>
<h3 id="dogeboxd---pup-management-and-runtime-orchestration"><a class="header" href="#dogeboxd---pup-management-and-runtime-orchestration">Dogeboxd - Pup management and runtime orchestration</a></h3>
<p><a href="https://github.com/dogeorg/dogeboxd">https://github.com/dogeorg/dogeboxd</a></p>
<p>Dogebox runs a daemon process 'dogeboxd' which provides installation
and orchestration of Pups which are run in isolated containers via
Linux Systemd / Linux Namespaces.</p>
<p>Dogeboxd manages inter-pup communications via nix-config rules, exposing
TCP ports between containers, and proxying REST APIs as required for Pups
to communicate with their dependencies, in accordance with their manifest rules.</p>
<p>This is all done in aid of providing an easy to use platform for Dogecoin
users that can provide a secure runtime environment for Dogecoin adventurers
who are not Linux administrators.</p>
<h3 id="dpanel---admin-ui"><a class="header" href="#dpanel---admin-ui">DPanel - Admin UI</a></h3>
<p><a href="https://github.com/dogeorg/dpanel">https://github.com/dogeorg/dpanel</a></p>
<p>The Dogebox is managed via a convenient Web control panel that allows the
user to install new Pups from the community, determine how they can communicate
with eachother and the network, and then ensure they are running and monitored.</p>
<h3 id="dkm---doge-key-manager"><a class="header" href="#dkm---doge-key-manager">DKM - Doge Key Manager</a></h3>
<p><a href="https://github.com/dogeorg/dkm">https://github.com/dogeorg/dkm</a></p>
<p>The DKM provides cryptographic authentication to the Dogebox and Dogecoin key
management for Pups in a manner that lets the user recover and control any
keys generated by pups, via the use of hierarchical deterministic keys.</p>
<p>Each Pup installed is issued a 'delegated' child key from the Dogebox user's
master key. Pups can then use these keys to derive further child keys for use
as pay-to addresses or anything else such as providing full wallet functionality,
online shops, etc.</p>
<p>DKM creates an encrypted master key and generates (derives) private-public
keypairs for pups and other parts of the DogeBox ecosystem.</p>
<p>Keys are encrypted at rest with the DogeBox password and stored on disk.</p>
<p>Passwords are first hashed using Argon2 memory-hard KDF (Argon2id variant)
with parameters time=3, memory=64M, threads=4 and the BLAKE2b hash function
as recommended in RFC 9106.</p>
<p>The password-derived hash is then used to encrypt the master key with ChaCha20
cypher and Poly1305 Authenticated Encryption (AE) scheme.</p>
<p>Keys in DKM are only in memory while they are actively being used for Authentication
or key derivation.</p>
<h3 id="dogenet---multi-protocol-gossip-network"><a class="header" href="#dogenet---multi-protocol-gossip-network">Dogenet - Multi-protocol gossip network</a></h3>
<p><a href="https://github.com/dogeorg/dogenet">https://github.com/dogeorg/dogenet</a></p>
<p>DogeNet is a service that implements the <em>Doge Gossip Protocol</em>, which is a
multi-channel protocol for communicating among Dogenet nodes.</p>
<p>It is a foundational piece for future experimental protocols (Project Sakura),
and provides useful side-channels for Dogecoin adjacent projects to communicate
without polluting the Dogecoin blockchain, where simple peer-to-peer
communication is sufficient.</p>
<p>DogeNet builds a database of active DogeBox nodes, which is used to find peer
nodes to connect to. DogeNet maintains a connection to at least 6 peers at all
times (more if running novel protocol-handlers that require connecting to other
participating nodes.)</p>
<p>DogeNet exposes a local UNIX-domain socket for custom Protocol Handlers to connect to
DogeNet and send/receive messages on any channels they're interested in.</p>
<p>Channels are assigned to different protocols; for example, DogeNet nodes announce
their presence and public address on the ''Node' channel; DogeBoxes can optionally
announce an identity profile on the ''Iden' channel, for display on the DogeMap and
for use in future social pups.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-dogebox"><a class="header" href="#getting-dogebox">Getting Dogebox</a></h1>
<p>There's a few options for running a Dogebox:</p>
<h2 id="pre-installed-hardware"><a class="header" href="#pre-installed-hardware">Pre-Installed Hardware</a></h2>
<p><img src="installation/../images/dbox.jpg" alt="Dogebox" width="70%" style="margin-left: 15%;"/></p>
<p>The Dogecoin Foundation is currently selling hardware that comes pre-installed with Dogebox, these are available for purchase from <a href="https://dogebox.dogecoin.org">the official Dogebox website</a></p>
<h2 id="diy-hardware"><a class="header" href="#diy-hardware">DIY Hardware</a></h2>
<p>Want to run Dogebox on your own hardware? <a href="installation/./metal.html">Click here &amp; let's go!</a></p>
<p>Unsure what to use? We suggest the FriendlyElec NanoPC-T6, with official dogebox support and plenty of CPU/RAM/HDD you can't go wrong. Check out <a href="installation/./t6/purchasing.html">purchasing T6 hardware</a> for more details.</p>
<p><img src="installation/../images/T6.jpg" alt="FriendlyElec NanoPC-T6" width="70%" style="margin-left: 15%;"/></p>
<h2 id="virtual-machine"><a class="header" href="#virtual-machine">Virtual Machine</a></h2>
<p>Want to test Dogebox in a VM? Check out the table below to figure out how.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">OS</th><th>Supported VM</th><th>Instructions</th></tr></thead><tbody>
<tr><td style="text-align: center">Windows</td><td>Virtualbox</td><td><a href="installation/./vms/virtualbox.html">Here</a></td></tr>
<tr><td style="text-align: center">MacOS (Intel)</td><td>Virtualbox</td><td><a href="installation/./vms/virtualbox.html">Here</a></td></tr>
<tr><td style="text-align: center">MacOS (Apple Silicon)</td><td>UTM</td><td><a href="installation/./vms/utm.html">Here</a></td></tr>
<tr><td style="text-align: center">Linux</td><td>Virtualbox</td><td><a href="installation/./vms/virtualbox.html">Here</a></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="bare-metal"><a class="header" href="#bare-metal">Bare Metal</a></h1>
<div class="warning">
Dogebox requires the following hardware specs to run:
<ul>
<li>UEFI Support</li>
<li><code>&gt;1GB</code> RAM</li>
<li><code>&gt;50GB</code> Disk Space (<code>&gt;300</code> if you want to sync the blockchain)</li>
</ul>
</div>
<p>It is possible to install Dogebox to one hard drive and use another as your "storage" device. This is configured during initial setup.</p>
<ol>
<li>Download the ISO image for your machine architecture from the <a href="https://github.com/dogeorg/dogebox/releases">Dogebox releases page</a></li>
<li>Write the ISO to a USB drive</li>
<li>Boot from the USB drive and proceed with installation, following <a href="installation/./setup.html">instructions here</a></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="virtual-machines"><a class="header" href="#virtual-machines">Virtual Machines</a></h1>
<h2 id="download-images"><a class="header" href="#download-images">Download images</a></h2>
<p>Head over to <a href="https://github.com/dogeorg/dogebox/releases">https://github.com/dogeorg/dogebox/releases</a> and download
the appropriate image for your VM platform.</p>
<h2 id="other-virtual-machines"><a class="header" href="#other-virtual-machines">Other Virtual Machines</a></h2>
<p>Any virtual machine that supports x86_64 OVA or ISO images should work.</p>
<p>Please consider the following:</p>
<ul>
<li>Network Bridged Mode is required, so you can visit the Dogebox DPanel in your web browser. When you create your new virtual machine, configure this in the settings (or command-line options). See screenshots above for an example.</li>
<li>Your virtual machine must support a display, so you can log in and find out its IP address. Again, see screenshots above for an example.</li>
</ul>
<h3 id="qemu"><a class="header" href="#qemu">QEMU</a></h3>
<p>Instructions for QEMU can be found at the bottom of <a href="https://github.com/dogeorg/dogebox">this page</a>.</p>
<h4 id="first-run"><a class="header" href="#first-run">First run</a></h4>
<p>Click the Play button to start your Virtual Machine. Follow steps 5 though 7 described above for VirtualBox:</p>
<ol start="5">
<li>Start your VM and wait for it to boot,</li>
<li>Login and find out your IP address,</li>
<li>In a web browser, visit the DogeBox Setup page, as described above.</li>
</ol>
<h4 id="restart-your-dogebox"><a class="header" href="#restart-your-dogebox">Restart your Dogebox</a></h4>
<p>When the DogeBox Setup page asks you to Restart your Dogebox:</p>
<ul>
<li>Go back to the Virtual Machine login window and enter command <code>sudo shutdown -h now</code> to shut down cleanly.</li>
<li>Wait for the window to clear - it becomes a big play button</li>
<li>Switch back to the main UTM window</li>
<li>At the bottom of the Virtual Machine's info page, find the CD/DVD drop-down (you might need to scroll down)</li>
<li>Click on it and choose <code>Clear</code> so it becomes <code>(empty)</code> - this removes the installer image.</li>
<li>Then, click the Play button to launch the VM again.</li>
</ul>
<h4 id="shut-down-your-dogebox"><a class="header" href="#shut-down-your-dogebox">Shut Down your Dogebox</a></h4>
<p>If you want to stop your DogeBox Virtual Machine:</p>
<ul>
<li>Go back to the Virtual Machine login window.</li>
<li>Log in if necessary with username: <code>shibe</code> and password: <code>suchpass</code></li>
<li>Enter command <code>sudo shutdown -h now</code> to shut down cleanly.</li>
</ul>
<p>It's a good idea to do this every time you want to shut down the DogeBox, otherwise stopping it with the Stop button risks corrupting the virtual disk image, and you would have to delete the virtual machine and start over.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="virtualbox"><a class="header" href="#virtualbox">Virtualbox</a></h1>
<ol>
<li>
<p>Download <a href="https://virtualbox.org">Virtualbox</a>, or another OVA compatible VM launcher.</p>
</li>
<li>
<p>Import the OVA image by selecting the file you downloaded from the latest release.</p>
</li>
</ol>
<p><img src="installation/vms/./images/vb1.PNG" alt="import OVA" width="70%" style="margin-left: 15%;"/></p>
<ol start="3">
<li>Ensure the VM has sufficient RAM for the software you plan to run on the Dogebox.</li>
</ol>
<p><img src="installation/vms/./images/vb2.PNG" alt="Set RAM" width="70%" style="margin-left: 15%;"/></p>
<ol start="4">
<li>Once imported, click 'Settings' and configure your Virtual Machine's network to use 'bridged mode'. This is required so you can visit the Dogebox DPanel in your web browser.</li>
</ol>
<p><img src="installation/vms/./images/vb3.PNG" alt="import OVA" width="70%" style="margin-left: 15%;"/></p>
<ol start="5">
<li>Launch the VM. This may take up to 10 minutes depending on your internet connection, to configure itself initially, grab a cuppa.</li>
</ol>
<p><img src="installation/vms/./images/vb4.PNG" alt="import OVA" width="70%" style="margin-left: 15%;"/></p>
<ol start="6">
<li>Login with username: <code>shibe</code> and password: <code>suchpass</code>, then run <code>ip addr</code>, it may look different to this but skip the first loopback interface 'lo' and look for another interface, then look for the line <code>inet</code> with your IP address, in this example: <code>192.168.1.5</code></li>
</ol>
<p><img src="installation/vms/./images/vb5.PNG" alt="import OVA" width="70%" style="margin-left: 15%;"/></p>
<ol start="7">
<li>In a web browser, visit <strong>http://your_ip_address:8080</strong> to visit the setup experience and configure your dogebox. In this example it would be <code>http://192.168.1.5:8080</code> but your IP address will be different.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="utm"><a class="header" href="#utm">UTM</a></h1>
<div class="warning">
UTM can only be used on Apple Silicon Macs (M1, M2, M3 models). If you have a different machine, please see the compatibility table in <a href="installation/vms/../vms.html">Virtual Machines</a>
</div>
<h2 id="downloading"><a class="header" href="#downloading">Downloading</a></h2>
<p>Visit the <a href="https://github.com/dogeorg/dogebox/releases">Dogebox releases page</a>, and downloaded the latest asset ISO image for the <code>aarch64</code> architecture.</p>
<h2 id="installing"><a class="header" href="#installing">Installing</a></h2>
<h4 id="create-new-machine"><a class="header" href="#create-new-machine">Create new Machine</a></h4>
<p><img src="installation/vms/./images/utm_1.png" alt="" /></p>
<h4 id="select-virtualise"><a class="header" href="#select-virtualise">Select Virtualise</a></h4>
<p><img src="installation/vms/./images/utm_2.png" alt="" /></p>
<h4 id="select-other-operating-system"><a class="header" href="#select-other-operating-system">Select "Other" operating system</a></h4>
<p><img src="installation/vms/./images/utm_3.png" alt="" /></p>
<h4 id="select-the-downloaded-aarch64-iso-file"><a class="header" href="#select-the-downloaded-aarch64-iso-file">Select the downloaded aarch64 ISO file</a></h4>
<p><img src="installation/vms/./images/utm_4.png" alt="" /></p>
<h4 id="set-the-amount-of-ram-you-want"><a class="header" href="#set-the-amount-of-ram-you-want">Set the amount of ram you want</a></h4>
<p>The default of <code>4096mb</code> is typically fine.</p>
<p><img src="installation/vms/./images/utm_5.png" alt="" /></p>
<h4 id="set-the-amount-of-storage-you-want"><a class="header" href="#set-the-amount-of-storage-you-want">Set the amount of storage you want</a></h4>
<p>UTM uses sparse disk files, so a 500GB disk will not actually take up 500GB on your hard drive.</p>
<p>If you wish to sync the blockchain in this VM image, ensure you set this to over <code>300GB</code>.</p>
<p><img src="installation/vms/./images/utm_6.png" alt="" /></p>
<h4 id="skip-any-shared-directory-configuration"><a class="header" href="#skip-any-shared-directory-configuration">Skip any shared directory configuration</a></h4>
<p><img src="installation/vms/./images/utm_7.png" alt="" /></p>
<h4 id="name-your-vm-image-and-open-settings"><a class="header" href="#name-your-vm-image-and-open-settings">Name your VM image and open settings</a></h4>
<p><img src="installation/vms/./images/utm_8.png" alt="" /></p>
<h3 id="configure-bridged-networking"><a class="header" href="#configure-bridged-networking">Configure Bridged networking</a></h3>
<ul>
<li>Select <code>Network</code> on the lefthand side.</li>
<li>Change <code>Network Mode</code> to <code>Bridged (Advanced)</code></li>
</ul>
<p><img src="installation/vms/./images/utm_9.png" alt="" /></p>
<h3 id="save--launch"><a class="header" href="#save--launch">Save &amp; Launch</a></h3>
<p><img src="installation/vms/./images/utm_9.png" alt="" /></p>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<p>Please see <a href="installation/vms/../setup.html">Initial Setup</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="generic-vm"><a class="header" href="#generic-vm">Generic VM</a></h1>
<p>Any VM software capable of booting from an ISO image should suffice.</p>
<p>We currently release <code>x86_64</code> and <code>aarch64</code> (<code>ARM64</code>) images, other architectures may work if you manually build your own bootable ISO image.</p>
<p>A few things to note:</p>
<ul>
<li>The ISO images currently only support UEFI boot.</li>
<li>We recommend <code>&gt;4GB</code> of ram, but as low as <code>1GB</code> should suffice.</li>
<li>A couple of cores should be the minimum, especially if you plan to install a Core node.</li>
<li>A way to directly hit your VM on specific ports is necessary.
<ul>
<li>Bridged mode is the easiest, but some VM software let you forward specific ports. If you do this, <code>8080</code> and <code>3000</code> are necessary for the Web UI to work, along with other ports specified in <a href="installation/vms/../../howto/ports.html">Forwarding Ports</a>.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="friendlyelec-nanopc-t6"><a class="header" href="#friendlyelec-nanopc-t6">FriendlyElec NanoPC-T6</a></h1>
<p>Beta release of the Dogebox OS built specifically for the FriendlyElec NanoPC-T6.</p>
<p><img src="installation/../images/t6-diy.jpg" alt="Dogebox" width="70%" style="margin-left: 15%;"/></p>
<h2 id="things-to-note--what-does-not-work"><a class="header" href="#things-to-note--what-does-not-work">Things to note / What does not work</a></h2>
<p>These things will all be fixed in a following release. This release is for tinkerers that are happy to re-flash a couple of times before a stable T6 release.</p>
<ul>
<li>The T6 bootloader only supports booting from microSD cards that are 32GB and smaller (SDHC, not SDXC)</li>
<li>Ethernet is required to be plugged in at first initial boot.</li>
<li>The OS still has a hardcoded username and password: <code>shibe</code> and <code>suchpass</code>. Please do not deploy your box on any unsecured network, as anyone may be able to login to your T6. This will be rectified in the next release with proper SSH key management.</li>
<li>WiFi configuration during initial setup is currently not supported.</li>
</ul>
<h2 id="download-images-1"><a class="header" href="#download-images-1">Download images</a></h2>
<p>Head over to <a href="https://github.com/dogeorg/dogebox/releases">https://github.com/dogeorg/dogebox/releases</a> and download
the latest <strong>dogebox-v0.x.x-beta-T6.img.gz</strong> file.</p>
<h2 id="decompress-the-downloaded-file"><a class="header" href="#decompress-the-downloaded-file">Decompress the downloaded file</a></h2>
<p>The Image file is compressed with gzip to save on bandwidth. This compressed file, however, must be decompressed to be flashed to the microSD card in order to be able to boot from it, when plugged into the dogebox hardware.</p>
<h2 id="how-to-get-the-image-to-the-microsd-card"><a class="header" href="#how-to-get-the-image-to-the-microsd-card">How to get the image to the microSD card</a></h2>
<p>The file you've downloaded is an filesystem image file. This means you have to copy the data over to the microSD card in a specific manner to make sure the data is able to be read when the machine boots.</p>
<p>To do this we recommend using a image flashing tool such as <a href="https://etcher.balena.io/">Balena Etcher</a> or <a href="https://rufus.ie/en/">Rufus</a></p>
<h2 id="how-to-flash-microsd-using-balena-etcher"><a class="header" href="#how-to-flash-microsd-using-balena-etcher">How to flash microSD using <code>Balena Etcher</code></a></h2>
<ul>
<li>Open <code>Balena Etcher</code></li>
<li>Click <code>Select iamge</code> and navigate to the location of your downloaded and decompressed <code>.img</code></li>
<li>Click <code>Select Drive</code> and choose the microSD card</li>
<li>Click <code>Flash</code> and wait for the flashing process to finish</li>
</ul>
<h2 id="how-to-flash-microsd-using-rufus"><a class="header" href="#how-to-flash-microsd-using-rufus">How to flash microSD using <code>Rufus</code></a></h2>
<p>You can easly flash using the OpenSource Rufus Tool that you can get the latest version here for your operating system: <a href="https://github.com/pbatard/rufus/releases">https://github.com/pbatard/rufus/releases</a></p>
<ul>
<li>Open <code>Rufus</code></li>
<li>On <code>Device</code> select your microSD card</li>
<li>Click on <code>Select</code> and Choose the file you downloaded and decompressed <code>.img</code></li>
<li>Click on <code>Start</code> and wait a few minutes to finish</li>
</ul>
<h2 id="how-to-flash-microsd-using-dd-if"><a class="header" href="#how-to-flash-microsd-using-dd-if">How to flash microSD using <code>dd if=</code></a></h2>
<ul>
<li>Download the T6 <code>.img.gz</code> file attached to the release.</li>
<li>Uncompress the image so you get the raw <code>.img</code> file. On windows you may need to download 7-Zip to uncompress the image.</li>
<li>On Linux &amp; MacOS, use <code>dd if=</code> to write the file to the raw microSD device.</li>
<li>On Windows, use a raw image disk writer UI. There are multiple available, e.g. Rufus.</li>
</ul>
<h2 id="how-to-setup"><a class="header" href="#how-to-setup">How to Setup</a></h2>
<p>With a monitor and keyboard available</p>
<ul>
<li>Insert the microSD card with image flashed.</li>
<li>Ensure you have an ethernet cable plugged into your T6 box.</li>
<li>Plug in a HDMI screen, make sure it's plugged into <code>HDMI1</code>.</li>
<li>Plug in a keyboard.</li>
<li>Plug power in.</li>
<li>Wait until the box finishes booting, this could take anywhere from 2 to 10 minutes.</li>
<li>Once finished, login with the username <code>shibe</code> and the password <code>suchpass</code>.</li>
<li>Enter command <code>ip addr</code> and take note of your IP address.
<ul>
<li>Ignore the <code>lo: &lt;LOOPBACK&gt;</code> section, look for another one.</li>
<li>Look for a line that starts with <code>inet</code> followed by your IP address, in this example <code>192.168.1.5</code>.</li>
<li>See the screenshot below.</li>
</ul>
</li>
<li>In a web browser, visit <code>http://your_ip_address:8080</code> to start configuring your dogebox.
<ul>
<li>In this example, it would be <code>http://192.168.1.5:8080</code> but your IP address will be different.</li>
<li>This will load the DogeBox Setup page.</li>
</ul>
</li>
</ul>
<p>Without a monitor and keyboard available</p>
<ul>
<li>Insert the microSD card with image flashed.</li>
<li>Ensure you have an ethernet cable plugged into your T6 box.</li>
<li>Plug power in.</li>
<li>Wait until the box finishes booting, this could take anywhere from 2 to 10 minutes.</li>
<li>In a web browser, visit <code>https://dogebox.local:8080</code> to start configuring your dogebox.
<ul>
<li>This will load the DogeBox Setup page.</li>
</ul>
</li>
</ul>
<p><img src="installation/../images/vb5.PNG" alt="How to find your IP address" width="70%" style="margin-left:1em;"/></p>
<h2 id="restart-your-dogebox-1"><a class="header" href="#restart-your-dogebox-1">Restart your Dogebox</a></h2>
<p>If you choose to install DogeBox OS on the internal eMMC storage (recommended), the setup page will ask you to restart your DogeBox.</p>
<ul>
<li>Go back to the hardware T6 keyboard, and enter command <code>sudo shutdown -h now</code> to shut down cleanly.</li>
<li>This also works if you want to shut down your DogeBox at any time (you may have to log in first)</li>
<li>It's a good idea to do this every time you want to shut down the DogeBox, otherwise pulling the plug risks corrupting the eMMC storage or SD card, and you might have to wipe your DogeBox and start over (often it will recover, but not always)</li>
</ul>
<h2 id="shut-down-your-dogebox-1"><a class="header" href="#shut-down-your-dogebox-1">Shut Down your Dogebox</a></h2>
<p>Descibed above under <em>Restart your Dogebox</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dogebox-initial-setup"><a class="header" href="#dogebox-initial-setup">Dogebox Initial Setup</a></h1>
<p>On the first boot of your dogebox, the system will be available on https://dogebox.local:8080/.</p>
<p>In case your network blocks mDNS, which can happen in some cases use the following methods to determine the IP address of the machine.</p>
<h2 id="determine-your-ip-address"><a class="header" href="#determine-your-ip-address">Determine your IP address</a></h2>
<div class="warning">
This won't be necessary in the near future, but for right now it is.
</div>
<p>There's a couple of ways to do this:</p>
<h4 id="access-to-the-machine"><a class="header" href="#access-to-the-machine">Access to the machine</a></h4>
<p>If you have access to the machine, you can login with the username <code>shibe</code>, and password <code>suchpass</code>.</p>
<p>Run the command <code>ip addr</code>, which should give you a list of IP addresses. Ignore the first lookback device <code>lo</code>, and look for an IP that starts with <code>10.</code>, <code>192.168.</code>, or <code>172.16.</code>.</p>
<p><img src="installation/../images/ip_addr.png" alt="" /></p>
<h4 id="no-access-to-the-machine"><a class="header" href="#no-access-to-the-machine">No access to the machine</a></h4>
<p>If you've started your machine without a display, or no keyboard, you'll need to determine the IP address using a different method. The easiest way to do this is to login to your router and look at the list of DHCP leases it has given out.</p>
<p>Unfortunately this is out-of-scope for this documentation, but a quick google of your router model and "list devices" should suffice.</p>
<h2 id="visit-setup-ui"><a class="header" href="#visit-setup-ui">Visit setup UI</a></h2>
<p>Once you've got your IP address or confirmed the box is available on dogebox.local, continue setup by visiting the Web UI. This is hosted on port <code>8080</code>.</p>
<p>eg. If your IP address is <code>192.168.0.2</code>, you should visit <code>http://192.168.0.2:8080</code> in your browser.</p>
<div class="warning">
<a href="https://discord.gg/VEUMWpThg9">Stuck? Visit us on discord.</a>
</div>
<p>See <a href="installation/./setup/disk.html">Disk Installation</a> to continue.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="disk-installation"><a class="header" href="#disk-installation">Disk Installation</a></h1>
<p>The first time you boot your dogebox, you'll be presented with one of the following prompts:</p>
<br />
<br />
<img class="left" width="50%" src="installation/setup/../../images/installation/disk_1.png">
<p><br /><br /><br />If you see this, you're able to continue booting from the current media. If you're satisfied with what DogeboxOS is installed on, you can hit "Stay" and continue following the <a href="installation/setup/configuration.html">setup instructions here.</a></p>
<br />
<br />
<br />
<br />
<img class="right" width="50%" height="100%" src="installation/setup/../../images/installation/disk_2.png">
<p><br /><br /><br />
If you see this one, you <b>must</b> install DogeboxOS onto a separate device, as your current boot media isn't compatible with some reason (maybe it's marked as read-only?)</p>
<p>Keep following below.</p>
<br />
<br />
<h2 id="select-your-disk"><a class="header" href="#select-your-disk">Select your Disk</a></h2>
<p>Now is the point where you should select the disk you want to install to.</p>
<p>Currently there are some restrictions on which drives show up:</p>
<ul>
<li>They must be unmounted, and contain no existing partition table.</li>
</ul>
<div class="warning">
<a href="https://discord.gg/VEUMWpThg9">Expecting a disk that isn't visible? Visit us on discord.</a>
</div>
<p><img src="installation/setup/../../images/installation/disk_3.png" alt="" /></p>
<h2 id="confirm-wipe"><a class="header" href="#confirm-wipe">Confirm wipe</a></h2>
<p>Once you've selected your disk, you need to confirm that <b>all data on the selected disk will be destroyed</b></p>
<p><img src="installation/setup/../../images/installation/disk_4.png" alt="" /></p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>Sit back and wait for installation to complete, this may take up to 10 minutes.</p>
<p><img src="installation/setup/../../images/installation/disk_5.png" alt="" /></p>
<h2 id="reboot"><a class="header" href="#reboot">Reboot</a></h2>
<p>Once you're done, you need to power off your Dogebox and restart it to exit setup/recovery mode.</p>
<p>When rebooted, see <a href="installation/setup/./configuration.html">Setup Configuration</a> for next steps.</p>
<p><img src="installation/setup/../../images/installation/disk_6.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<h2 id="terms"><a class="header" href="#terms">Terms</a></h2>
<p><img src="installation/setup/../../images/installation/config_terms.png" alt="" /></p>
<p>This one is pretty simple. No options here, just you confirming you agree to some things.</p>
<h2 id="config"><a class="header" href="#config">Config</a></h2>
<p><img src="installation/setup/../../images/installation/config_config.png" alt="" /></p>
<p>Here we have some basic system configuration options.</p>
<h4 id="device-name"><a class="header" href="#device-name">Device Name</a></h4>
<p>This is what your devices <code>hostname</code> will be set to. The value chosen here will determine the mDNS address you will be able to access the WebUI with later on. E.g. if you choose <code>my-dogebox</code> then you'll be able to access the WebUI at https://my-dogebox.local:8080/.</p>
<h4 id="keyboard-layout"><a class="header" href="#keyboard-layout">Keyboard Layout</a></h4>
<p>If you are planning on using a keyboard (rather than <code>SSH</code>) to interact with your Dogebox, you should select your keyboard layout here so that when you press <code>a</code> it actually types <code>a</code> :)</p>
<h4 id="storage-device"><a class="header" href="#storage-device">Storage Device</a></h4>
<p>Here is where you configure your storage device. By default it will select the disk that you have DogeboxOS installed to.</p>
<p><img src="installation/setup/../../images/installation/config_storage_1.png" alt="" /></p>
<p>If you have an alternative (maybe larger?) disk that you wish to pick, select it here. This will be used for all pup storage and other Dogebox configuration things. This will require you to confirm that everything on this disk <strong>will be destroyed</strong>.</p>
<p><img src="installation/setup/../../images/installation/config_storage_2.png" alt="" /></p>
<h2 id="set-password"><a class="header" href="#set-password">Set Password</a></h2>
<p><img src="installation/setup/../../images/installation/config_password.png" alt="" /></p>
<p>This is where you will set your access &amp; encryption password. Currently, we do not restrict what your password can be, so ensure that it is secure, because it will be protecting your whole Dogebox!</p>
<h2 id="create-key"><a class="header" href="#create-key">Create Key</a></h2>
<p><img src="installation/setup/../../images/installation/config_key.png" alt="" /></p>
<p>Clicking <code>Generate</code> will create a new HD private key that will be the root of everything for your Dogebox.</p>
<p>Once done, it will pop up the seed phrase for this key.</p>
<div class="warning">
As mentioned, this will be the only time <b>ever</b> you will get access to this seed phrase. You must back it up somewhere securely, or risk losing access to your Dogebox.
</div>
<p><img src="installation/setup/../../images/installation/config_key_seed.png" alt="" /></p>
<h2 id="network"><a class="header" href="#network">Network</a></h2>
<p><img src="installation/setup/../../images/installation/config_network.png" alt="" /></p>
<div class="warning">
Currently we only support Ethernet connections. Support for Wi-Fi is coming soon™ in a release.
</div>
<p>Here you can select how you want your Dogebox to connect to your network.</p>
<p>You can also enter an SSH <strong>public</strong> key here, if you have one. This will enable the SSH server on your Dogebox as an alternative method to access.</p>
<p>Hitting <code>Connect</code> here will start configuring your box, and might take a little while!</p>
<h2 id="done"><a class="header" href="#done">Done!</a></h2>
<p><img src="installation/setup/../../images/installation/config_done.png" alt="" /></p>
<p>If you got here, you're all set! Your dogebox should automatically reboot, connect to your specified network, and then start up in normal mode (instead of recovery/setup mode).</p>
<p>After a little while (a minute or two) you should see the <code>Launch Dogebox</code> button enable itself, showing the detected Dogebox IP address next to it.</p>
<div class="warning">
Doesn't happen? No worry, on some networks it might not be supported. Try refeshing the page after a little bit and see if you can re-connect, otherwise follow the instructions for "Finding your IP address" again.
</div>
<img src="installation/setup/../../images/installation/config_done_reflector.png" width="30%">
<p>You're all done. Install some pups. Run a core node. Sell some stuff. Join the network.</p>
<p>The options are unlimited.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing-pups"><a class="header" href="#installing-pups">Installing PUPs</a></h1>
<p>Pups are the lifeblood of the Dogebox, these are packaged services
that the Dogebox runs inside an isolated container, they can depend
on other Pups such as Dogecoin Core or GigaWallet, and thus build up
a functional Dogecoin ecosystem that can provide online shopping,
tipping, new wallets or anything else that interacts with the Dogecoin
Blockchain.</p>
<p><img src="howto/../images/dogebox-logo.png" alt="Managing Pups" width="90%" style="margin-left: 5%;"/></p>
<h2 id="explore---the-pup-store"><a class="header" href="#explore---the-pup-store">Explore - The Pup Store</a></h2>
<p>Clicking the 'Explore' link in the nav will take you to the 'Pup Store' where all
available Pups can be found.</p>
<blockquote>
<p>⚠️ Note: To start with you will only see a few Pups provided by
the Dogecoin Foundation supported 'Pup Source', such as Dogecoin Core,
Dogecoin GigaWallet, Dogenet and a few others. More Pups can be added to the store
by adding new 'Pup Sources' (see below).</p>
</blockquote>
<p><img src="howto/../images/explore.png" alt="Pup Store" width="90%" style="margin-left: 5%;"/></p>
<h2 id="pup-sources---where-do-pups-come-from"><a class="header" href="#pup-sources---where-do-pups-come-from">Pup Sources - Where do pups come from?</a></h2>
<p>Dogebox is designed to let the community create and distribute Pups without
any centralised group controlling a 'store' (hint: like Google or Apple!).</p>
<p>From the Pup Store you can 'manage sources', and paste in a URI to a different
Pup source form the internet. This will be scanned and any pups found will be
available in the Pup Store.</p>
<blockquote>
<p>⚠️ Note: currently Sources are Git repositories that follow a particular
format, however we are working on other Source types such as decentralised
Radicle sources, http and others.</p>
</blockquote>
<p><img src="howto/../images/sources.png" alt="Pup Sources" width="90%" style="margin-left: 5%;"/></p>
<h2 id="pup-installation"><a class="header" href="#pup-installation">Pup Installation</a></h2>
<p>Clicking a pup from the Pup Store will let you install the Pup. Dogebox will
prepare an isolated 'container' for your Pup to run in, and assign any resources
that your Pup needs based on it's config.</p>
<blockquote>
<p>⚠️ Note: This may take some time as Dogebox will download the source-code for the software
and compile it on your Dogebox. Dogecoin Core may take 10 minutes or more depending on your
hardware. Grab a cuppa and chill.</p>
</blockquote>
<p><img src="howto/../images/installing.png" alt="Pup Installation" width="90%" style="margin-left: 5%;"/></p>
<h2 id="pup-management-screen"><a class="header" href="#pup-management-screen">Pup Management Screen</a></h2>
<p>The pup management screen exists for every installed pup, and is the main
control panel for interacting with the software. From here you can monitor the
general Stats of the container, view any custom Mertrics or Logs, and launch
the Pup's own UI (if it provides one!)</p>
<p><img src="howto/../images/installed.jpg" alt="Pup Management Screen" width="90%" style="margin-left: 5%;"/></p>
<h2 id="meeting-dependencies"><a class="header" href="#meeting-dependencies">Meeting Dependencies</a></h2>
<p>Some pups depend on other pups, they do this via 'Interfaces' and 'Providers'. A pup
that requires an interface provider will let you know by entering the <code>Unmet Dependencies</code>
state.</p>
<p>At this point you will need to install or select a pup that 'provides' the required
interface. Don't worry, there's a helpful dialog to get you through this step.</p>
<p><img src="howto/../images/deps.jpg" alt="Pup Deps" width="90%" style="margin-left: 5%;"/></p>
<h2 id="enabling--disabling-pups"><a class="header" href="#enabling--disabling-pups">Enabling / Disabling Pups</a></h2>
<p>From the Pup management screen, you can use the 'Enabled' slider to enable or disable
a pup.</p>
<blockquote>
<p>⚠️ Note: this may take a little time as Dogebox is managing interconnected services
related to this Pup, opening or closing firewall ports and updating it's internal
routes.</p>
</blockquote>
<h2 id="reading-logs"><a class="header" href="#reading-logs">Reading Logs</a></h2>
<p>For the more technically minded, you can click the 'Logs' action under the Pup management
screen to see the output of the Pup in realtime.</p>
<p><img src="howto/../images/logs.jpg" alt="Reading Logs" width="90%" style="margin-left: 5%;"/></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inbound-ports-22556-core-42069-dogenet"><a class="header" href="#inbound-ports-22556-core-42069-dogenet">Inbound Ports: 22556 (core), 42069 (Dogenet)</a></h1>
<p>Depending on what Pups you install you will likely want to forward
inbound connections. Installing Dogecoin Core Pup requires port 22556
and for Dogenet 42069, other Pups may also require inbound connection
forwarding, depending on what they do.</p>
<h1 id="home-routers"><a class="header" href="#home-routers">Home routers</a></h1>
<p>In most homes, computers connect to the Internet through a modem or a router,
which is configured to block incoming connections to most ports. To forward
ports, you will need to follow the following steps.</p>
<p>Please refer to your router’s manual for specific instructions.</p>
<ol>
<li>
<p>Access your router’s control panel using your internet browser. Usually, most
routers have a control panel accessible at https://192.168.0.1 or at
https://192.168.1.1. Sometimes, a sticker is placed on the bottom or the side
of the router listing the IP.</p>
</li>
<li>
<p>Login into the control panel of the router. You will need to use the username
and password provided by the router manufacturer. Sometimes, a sticker is placed
on the bottom or the side of the router revealing the admin password.</p>
</li>
<li>
<p>In the router’s control panel, assign a static IP to your Dogebox. This is normally
done in the Dynamic Host Configuration Protocol (DHCP) page.</p>
</li>
<li>
<p>In the router’s control panel, configure port forwarding: forward all inbound
traffic from 22556 (core) and 42069 (Dogenet) to the same ports at the static IP
you assigned to your Dogebox.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dre-development-environment"><a class="header" href="#dre-development-environment">DRE Development Environment</a></h1>
<p>The Dogebox exclusively runs on NixOS as its linux-base.</p>
<h3 id="install-nixos-in-a-vm"><a class="header" href="#install-nixos-in-a-vm">Install NixOS in a VM</a></h3>
<p>There are multiple ways of accomplishing this. The easiest way by far is to use <a href="https://orbstack.dev/">Orbstack</a> which supports NixOS VMs natively, and provides useful filesystem and host-network sharing.</p>
<p>The rest of this guide will assume you are using Orbstack, or a VM solution that lets you bind to your hosts network interfaces.</p>
<h3 id="clone-required-repositories"><a class="header" href="#clone-required-repositories">Clone required repositories</a></h3>
<p>There are 3 repositories that provide the foundational building blocks for Dogebox. Please <code>git clone</code> all of these.</p>
<ul>
<li><a href="https://github.com/dogeorg/dogeboxd">Dogeboxd</a> - <code>https://github.com/dogeorg/dogeboxd.git</code></li>
<li><a href="https://github.com/dogeorg/dpanel">DPanel</a> - <code>https://github.com/dogeorg/dpanel.git</code></li>
<li><a href="https://github.com/dogeorg/dkm">DKM</a> - <code>https://github.com/dogeorg/dkm.git</code></li>
</ul>
<p>Please note: <code>dogeboxd</code> &amp; <code>dpanel</code> must be cloned into the same parent directory. You can clone <code>DKM</code> anywhere.</p>
<h3 id="configure-your-nix-environment"><a class="header" href="#configure-your-nix-environment">Configure your Nix environment</a></h3>
<p>As we're running a development environment, some things must be configured manually.</p>
<h4 id="import-dogeboxnix"><a class="header" href="#import-dogeboxnix">Import <code>dogebox.nix</code></a></h4>
<p>Edit <code>/etc/nixos/configuration.nix</code>. Towards the top of the file there should be an <code>imports</code> section.</p>
<p>Please modify it to conditionally include the <code>dogebox.nix</code> file that will live in <code>$HOME/data/nix/dogebox.nix</code></p>
<p>For example, if your existing imports block looks like:</p>
<pre><code class="language-nix">  imports =
    [
      "${modulesPath}/virtualisation/lxc-container.nix"
      ./lxd.nix
    ];
</code></pre>
<p>Please change it to:</p>
<pre><code class="language-nix">  imports =
    [
      "${modulesPath}/virtualisation/lxc-container.nix"
      ./lxd.nix
    ] ++ lib.optionals (builtins.pathExists "/home/$USER/data/nix/dogebox.nix") [
      /home/$USER/data/nix/dogebox.nix
    ];
</code></pre>
<p>Where <code>$USER</code> is the user you have inside your NixOS VM.</p>
<h4 id="add-required-packages"><a class="header" href="#add-required-packages">Add required packages</a></h4>
<p>Edit <code>/etc/nixos/configuration.nix</code>. Inside the main <code>{ ... }</code> block, please add:</p>
<pre><code class="language-nix">environment.systemPackages = [ pkgs.git pkgs.vim ];
</code></pre>
<p>nb. Vim is not required, but lots of people get annoying that it is not available :)</p>
<h4 id="add-required-security-wrappers"><a class="header" href="#add-required-security-wrappers">Add required security wrappers</a></h4>
<p>Edit <code>/etc/nixos/configuration.nix</code>. Inside the main <code>{ ... }</code> block, please add:</p>
<pre><code class="language-nix">security.wrappers.dbx = {
  source = "/home/$USER/dogeboxd/build/dbx";
  owner = "$USER";
  group = "users";
};

security.wrappers.dogeboxd = {
  source = "/home/$USER/dogeboxd/build/dogeboxd";
  capabilities = "cap_net_bind_service=+ep";
  owner = "$USER";
  group = "users";
};

security.wrappers._dbxroot = {
  source = "/home/$USER/dogeboxd/build/_dbxroot";
  owner = "root";
  group = "root";
  setuid = true;
};
</code></pre>
<p><strong>Please note:</strong> Please fix these paths, they assume you have cloned <code>dogeboxd</code> into the users home directory. If you cloned them elsewhere, update the paths.
<strong>Please note:</strong> There are multiple instances of <code>$USER</code> that need replacing, please update all of them.</p>
<h4 id="rebuild"><a class="header" href="#rebuild">Rebuild</a></h4>
<p>Once you've added the above, you can rebuild your VM to ensure it's in a proper state to execute everything.</p>
<p>Please run: <code>sudo nixos-rebuild switch</code>. Assuming this succeeds, you're ready to rock and roll.</p>
<h3 id="starting-services"><a class="header" href="#starting-services">Starting Services</a></h3>
<p>You need to be running <code>dogeboxd</code> and <code>dkm</code> at the same time to have things working. <code>dpanel</code> is served via <code>dogeboxd</code> automatically, assuming they've been cloned into the same parent directory.</p>
<p>Both services contain a <code>shell.nix</code> which provides all the necessary dependencies for executing the service.</p>
<p>Both services also contain a <code>Makefile</code> that provides a <code>dev</code> command that run things in a "default" development mode.</p>
<h5 id="starting-dogeboxd"><a class="header" href="#starting-dogeboxd">Starting <code>dogeboxd</code></a></h5>
<pre><code class="language-bash">cd dogeboxd
nix-shell
make dev
</code></pre>
<h5 id="starting-dkm"><a class="header" href="#starting-dkm">Starting <code>dkm</code></a></h5>
<pre><code class="language-bash">cd dkm
nix-shell
make dev
</code></pre>
<p><code>dogeboxd</code> should now be listening on <a href="http://127.0.0.1:3000">http://127.0.0.1:3000</a> and should be ready in setup mode.</p>
<p>After initial setup has completed, you will need to re-run <code>make dev</code> for <code>dogeboxd</code> to launch it again in normal-mode. Please see below for more details.</p>
<h3 id="things-to-note"><a class="header" href="#things-to-note">Things to note</a></h3>
<ul>
<li>In development mode, any time the service would trigger a <code>shutdown</code> or <code>restart</code>, the dogeboxd process will <code>exit</code> instead.</li>
<li>In development mode your dogeboxd/dpanel sessions will persist across service restarts. This will not happen in non-development mode.</li>
<li>You can run <code>make recovery</code> to force dogeboxd into recovery mode.</li>
<li>All data for both <code>dogeboxd</code> and <code>DKM</code> is written to <code>~/data</code>. Deleting this directory will reset your state.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-dogebox"><a class="header" href="#building-dogebox">Building Dogebox</a></h1>
<p>Building images for Dogebox requires the Dogebox repository, and a Linux OS with nix tooling installed.</p>
<p><a href="https://github.com/dogeorg/dogebox/">https://github.com/dogeorg/dogebox/</a></p>
<p>For help building images be sure to join <a href="https://discord.gg/VEUMWpThg9">Developer Discord Server</a></p>
<h2 id="installer-image-for-the-nanopc-t6"><a class="header" href="#installer-image-for-the-nanopc-t6">Installer image for the NanoPC T6</a></h2>
<h3 id="building"><a class="header" href="#building">Building</a></h3>
<div class="warning">
Please note: This will take a while on first build, as the T6 image needs to compile the linux kernel initially.
</div>
<p>To build an image for the T6, open a shell in the root of this repository and then run the following.</p>
<pre><code>nix-shell
make t6
</code></pre>
<p>The resulting image will end up as <code>result/dogebox-*-t6.img</code>.</p>
<h3 id="copying-to-microsd-card"><a class="header" href="#copying-to-microsd-card">Copying to MicroSD Card</a></h3>
<details>
  <summary>MacOS</summary>
<p>If building the image from within an Orb VM, you need to copy this image out to your host first:</p>
<ol>
<li><code>cp result/*.img /private/tmp</code>.</li>
</ol>
<p>This will move the image file to the <code>/tmp</code> directory.</p>
<p>On your host:</p>
<ol>
<li><code>brew install pv</code> to get tooling for progress.</li>
<li>Run <code>sudo diskutil list</code> and find the <code>/dev/</code> device for your MicroSD card.</li>
<li>Unmount the MicroSD card with <code>sudo diskutil umountDisk /dev/disk100000</code> (replace with proper disk number)</li>
<li>Run <code>sudo dd if=/tmp/dogebox-*-t6.img | sudo pv | sudo dd of=/dev/rdisk10000 bs=16m</code> (note: <code>rdisk</code> here, not <code>disk</code>, and replace with proper disk number)</li>
</ol>
</details>
<details>
  <summary>Linux</summary>
<ol>
<li>Install PV using your fav/os package manager.</li>
<li>Determine disk device.</li>
<li><code>sudo dd if=/path/to/dogebox-t6.img | sudo pv | sudo dd of=/dev/disk10000 bs=16m</code> (replace with proper disk number)</li>
</ol>
</details>
<details>
  <summary>Windows</summary>
<p>TODO</p>
</details>
<h2 id="other-image-types"><a class="header" href="#other-image-types">Other image types.</a></h2>
<p>Available types:</p>
<ul>
<li><code>iso-aarch64</code></li>
<li><code>iso-x86_64</code></li>
<li><code>qemu-aarch64</code></li>
<li><code>qemu-x86_64</code></li>
<li><code>vbox-x86_64</code></li>
<li><code>vm-x86_64</code></li>
</ul>
<p>Build the resulting image with: <code>make &lt;type&gt;</code>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="editor.js"></script>
        <script src="mode-rust.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
